@using QLNhaSachFahasa.Resources
@using QLNhaSachFahasa.Common;
@using System.Threading;
@using QLNhaSachFahasa.Models

@{
    var session = (UserLogin)Session[QLNhaSachFahasa.Common.CommonConstants.USER_SEESION];
    var sessioncart = (List<CartModel>)Session[QLNhaSachFahasa.Common.CartSession.CartSesstion];
    var sumCart = 0;
    if (sessioncart != null)
    {
        sumCart = sessioncart.Count;
    }

}
@{
    var currLang = Thread.CurrentThread.CurrentCulture.ToString();
    var classEn = currLang == "en-US" ? "" : "lang-nonactive";
    var classVi = currLang == "vi-VN" ? "" : "lang-nonactive";

}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>@ViewBag.Title</title>
    <link rel=”stylesheet” href=”https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css” />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Quicksand:500&display=swap" rel="stylesheet">
    <!-- Material Kit CSS -->

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://kendo.cdn.telerik.com/2020.1.406/styles/kendo.bootstrap-v4.min.css" />
    <link rel="stylesheet" href="https://kendo.cdn.telerik.com/2020.1.406/styles/kendo.mobile.all.min.css" />

    <link href="~/Content/bootstrap-4.4.1/css/bootstrap.min.css" rel="stylesheet" />
    <link href="@Url.Content("~/Content/owlCarousel/css/owl.carousel.min.css")" rel="stylesheet" />
    <link href="@Url.Content("~/Content/owlCarousel/css/owl.theme.default.min.css")" rel="stylesheet" />
    <link href="@Url.Content("~/Content/owlCarousel/css/owl.theme.green.min.css")" rel="stylesheet" />
    <link href="~/Content/Custom-kendo.css" rel="stylesheet" />
    <link href="~/Content/main.css" rel="stylesheet" />
    <link href="~/Content/custom/HomePage.css" rel="stylesheet" />
    @Scripts.Render("~/bundles/modernizr")
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    @*<script src="https://code.jquery.com/jquery-1.12.3.min.js"></script>*@

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.2.4/gsap.min.js"></script>
    <script src="https://kendo.cdn.telerik.com/2020.1.406/js/angular.min.js"></script>
    <script src="https://kendo.cdn.telerik.com/2020.1.406/js/jszip.min.js"></script>
    <script src="https://kendo.cdn.telerik.com/2020.1.406/js/kendo.all.min.js"></script>
    <script src="@Url.Content("~/Content/owlCarousel/js/owl.carousel.min.js")"></script>
</head>
<body>

    <header class="header-of-page">
        <div class="header-content black-bg">
            <a href="@Url.Action("Index","Home")" class="logo">
                <img src="~/Content/images/icon/logoFahasa.png" />
            </a>
            <div class="header-user">

                <div class="nav-menu ">
                    <div class="inner-form nav-item">
                        <div class="input-field">
                            <input class="form-control" id="searchProduct" type="text" placeholder="@ViewText.LABLE_SEARCH" />
                            <div id="dataSearch" class="content-search-product"></div>
                            <script type="text/x-kendo-template" id="templateBoxSearch">
                                <div class="item">
                                    <img src="/UploadFile/#:LINKHINHANH#" alt="#:TENSANPHAM#" height="40px" width="40px" />
                                    <span>#:TENSANPHAM#</span>
                                </div>
                            </script>
                            <button class="btn-search" type="button">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="btn-language d-flex nav-item">
                        <a href="@Url.Action("Change", "Home", new { LanguageAbbrevation = "vi" })"><img src="@Url.Content("~/Content/images/icon/flag-vi.png")" class="@classVi" width="25px" /></a>
                        <a href="@Url.Action("Change", "Home", new { LanguageAbbrevation = "en" })"><img src="@Url.Content("~/Content/images/icon/flag-us.png")" class="@classEn ml-2" width="25px" /></a>
                    </div>
                    <a class="nav-item" href="@Url.Action("Index","Cart")">
                        <div id="cart-shop" class="icon-cart" style="clear: left; float: left">
                            <div class="cart-line-1" style="background-color: #2CC3B5"></div>
                            <div class="cart-line-2" style="background-color: #2CC3B5"></div>
                            <div class="cart-line-3" style="background-color: #2CC3B5"></div>
                            <div class="cart-wheel" style="background-color: #2CC3B5"></div>
                            <span class="count-number" id="sumcart">@sumCart</span>
                        </div>
                    </a>
                    @if (session == null)
                    {
                        <div class="login-block nav-item">
                            <a href="@Url.Action("Register","User")">@ViewText.LABLE_REGISTER</a>
                        </div>
                        <div class="login-block nav-item">
                            <a href="@Url.Action("Index","User")" class="user-btn">@ViewText.LABLE_LOGIN</a>
                        </div>
                    }
                    else
                    {
                        <div class="info-user nav-item">
                            <span><small>@ViewText.LABLE_HELLO,</small>  @session.Name&nbsp</span>
                            <div class="option-box">
                                <div class="item-option">
                                    <a href="javascript:void(0)">
                                        <img src="@Url.Content("~/Content/images/icon/user.png")" />
                                        <span class="">Thông tin tài khoản</span>
                                    </a>
                                </div>
                                <div class="item-option">
                                    <a href="@Url.Action("Logout","User")" alt="@ViewText.TITLE_LOGOUT">
                                        <img src="@Url.Content("~/Content/images/icon/Logout-WF.png")" />
                                        <span class="">@ViewText.TITLE_LOGOUT</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    }

                </div>
            </div>
        </div>
    </header>
    <div style="width:100%;height:93px;background-color:#fff"></div>
    @*<div class="content-banner" style="background-image: url('/Content/images/Banner/freudbanner.u547.d20160817.t145604.456704.jpg')">
        <p class="first-title">@ViewText.WELCOME_FAHASA</p>
        <p id="first-title" class="banner-des"></p>
    </div>*@
    <div>
        @RenderBody()
    </div>
    @*<footer>
        <div class="container">
            <div class="row mt-5">
                <div class="col-xl-3 col-lg-4 col-sm-6">
                    <img src="~/Content/images/icon/logoFahasa.png" style="width:60%" />
                    <p>
                        <span class="font-weight-bold">@ViewText.TITLE_ADDRESS: </span>
                        <span class="text"> 140 Lê Trọng Tấn, Tân Phú, Hồ Chí Minh</span>
                    </p>
                    <p>
                        <span class="font-weight-bold">@ViewText.TITLE_PHONE: </span>
                        <span class="text"> @ViewText.PHONE_CONTACT</span>
                    </p>
                    <p>
                        <span class="font-weight-bold">@ViewText.TITLE_EMAIL: </span>
                        <span class="text"></span>
                    </p>
                </div>
                <div class="col-xl-3 col-lg-4 col-sm-6">

                </div>
                <div class="col-xl-3 col-lg-4 col-sm-6">

                </div>
                <div class="col-xl-3 col-lg-4 col-sm-6">

                </div>
            </div>
        </div>

    </footer>*@
    @*<script src="/Scripts/jquery.unobtrusive-ajax.min.js"></script>*@
    <script src="/Scripts/jquery.validate.js"></script>
    <script src="/Scripts/Gsap.js"></script>
    <script src="/Scripts/QLFahasa.js"></script>

    <script>
        $(function () {
            //Random Text
            @*var r_text = new Array();
            r_text[0] = "@Html.Raw(ViewText.RANDOM_TEXT_0)";
            r_text[1] = "@Html.Raw(ViewText.RANDOM_TEXT_1)";
            r_text[2] = "@Html.Raw(ViewText.RANDOM_TEXT_2)";
            r_text[3] = "@Html.Raw(ViewText.RANDOM_TEXT_3)";
            r_text[4] = "@Html.Raw(ViewText.RANDOM_TEXT_4)";
            r_text[5] = "@Html.Raw(ViewText.RANDOM_TEXT_5)";
            r_text[6] = "@Html.Raw(ViewText.RANDOM_TEXT_6)";
            var i = Math.floor(7 * Math.random());
            var firstTitle = document.getElementById("first-title");
            firstTitle.innerHTML = r_text[i];*@
            $(window).scroll(function () {
                fixedHeaderBg();
            });
            var boxSearch = $("#dataSearch").kendoListView({
                template: kendo.template($("#templateBoxSearch").html()),
                dataSource: { type: "json" },
                //@*dataBound: function (e) {
                //    if (this.dataSource.data().length == 0) {
                //        $("#listView").append("<div class='w-100 text-center border p-2'>@Html.Raw(ViewText.TEXT_NO_DATA_FOUND)</div>");
                //    }
                //},*@
            }).data("kendoListView");
            function getDataBoxSearch(keyword) {
                var dataSourceBoxSearch = new kendo.data.DataSource({
                    transport: {
                        read: function (options) {
                            $.ajax({
                                url: '@Url.Action("GetDataSearchProduct", "Home")',
                                data: {
                                    keyword: keyword,
                                },
                                dataType: "json",
                                success: function (result) {
                                    options.success(result);
                                },
                                error: function (result) {
                                    options.error(result);
                                }
                            });
                        }
                    },
                });
                boxSearch.setDataSource(dataSourceBoxSearch);
            }

            $("#searchProduct").keyup(function () {
                setTimeout(function () {
                    var keyword = $("#searchProduct").val();
                    if ($.trim(keyword) != '') {
                        $("#dataSearch").removeClass("d-none");
                        getDataBoxSearch(keyword);
                    } else {
                        $("#dataSearch").addClass("d-none");
                    }

                }, 500);
            });

        });
    </script>
    @RenderSection("scripts", required: false)
</body>
</html>

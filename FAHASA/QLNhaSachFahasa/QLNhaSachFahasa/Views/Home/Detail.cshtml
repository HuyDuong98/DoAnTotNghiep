@using QLNhaSachFahasa.Resources
@{
    ViewBag.Title = "Detail";
    Layout = "~/Views/Shared/_LayoutHome.cshtml";
}
<div class="container mt-4">
    <div id="imageDetail"></div>
    <script type="text/x-kendo-template" id="templateDetail">
        <div class="sumary-detail-view wide">
            <ul id="homes">
                #for(var i=0; i < HINHANH.length; i++){#
                #if(i < 3){#
                <li><a id="thumb#:i+1#" class="img-thumb" data-index="#:i#" href="javascrpt:void(0)" style="background: url('/UploadFile/#=HINHANH[i].LINKHINHANH#')"></a></li>
                #}else{#
                <li><span onclick="fnClickMore()" class="img-plus">+#:HINHANH.length-2#</span></li>
                #break;#
                #}#
                #}#
            </ul>
            <div class="placeholder-box">
                <div id="placeholder">
                    #for(var i=0; i < HINHANH.length; i++){#
                    #if(i==0){#
                    <img id="home#:i#" src="/UploadFile/#=HINHANH[i].LINKHINHANH#" />
                    #}else if(i < 3){#
                    <img id="home#:i#" style="display:none" src="/UploadFile/#=HINHANH[i].LINKHINHANH#" />
                    #}#
                    #}#
                </div>
            </div>
            <div class="summary-detail">
                <h3> #:TENSANPHAM#</h3>
                <div class="row">
                    <div class="col-md-6">
                        <span class="text-title">Nhà cung câp: </span><span class="text-value">AZ Việt Nam</span>
                    </div>
                    <div class="col-md-6">
                        <span class="text-title">Tác giả: </span><span class="text-value">#:TACGIA#</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <span class="text-title">Nhà xuất bản: </span><span class="text-value">#:NHAXUATBAN#</span>
                    </div>
                    <div class="col-md-6">
                        <span class="text-title">Tác giả: </span><span class="text-value">LiNi Thông Minh</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">#:GIABAN#</div>
                </div>
            </div>
        </div>
        <div class="mt-5">
            <h5>Mô tả sản phẩm</h5>
            <div class="text-justify">
                #=htmlDecode(GHICHU||"")#
            </div>
           
        </div>
    </script>
</div>
@section scripts{
    <script type="text/javascript" charset="utf-8">
        templateInfoOrder();
        function htmlDecode(value) {
            return value.replace(/&lt;/g, "<").replace(/&gt;/g, ">");
        }
        function templateInfoOrder() {
            $.ajax({
                url: '@Url.Action("GetBook", "Home")',
                data: {
                    productID:'@ViewBag.ProductID'
                },
                dataType: "json",
                success: function (result) {
                    var template = kendo.template($("#templateDetail").html());
                    $("#imageDetail").html(template(result));
                    $(function () {
                        var index = 0,
                            currentEffect;

                        $("#homes a").click(function (e) {
                            e.preventDefault();
                            var target = parseInt($(this).data("index"));
                            if (target === index) {
                                return;
                            }

                            if (currentEffect) {
                                currentEffect.stop();
                            }
                            $("#home" + target).show();
                            currentEffect = kendo.fx("#home" + target).replace("#home" + index, "swap");
                            currentEffect.run();
                            index = target;
                        });
                    });
                },
            });
        }
        function fnClickMore() {
            console.log("Click more");
        }
    </script>
}
